<div class="keMultiselect" ng-class="{'is-fullWidth': ctrl.fullWidth,'is-open': ctrl.isFocused}">
    <input
            type="hidden"
            ng-model="ctrl.ngModel"
            ng-change="ctrl.onChange(ngModel)"
            ng-model-options="{debounce: 300}"
            >
    <div class="keMultiselect-Overlay" ng-click="ctrl.isFocused = false;"></div>
    <div class="keMultiselect-Container">
        <div class="keMultiselect-Items">
            <span
                class="keMultiselect-Item"
                ng-repeat="item in ctrl.selectedValues"
                ng-click="ctrl.removeValue(item)"
                ng-bind-html="item | sanitize">{{item}} <i class="fa fa-times"></i></span>
        </div>
        <div>
            <input class="keMultiselect-Input"
                   type="text"
                   ng-required="ctrl.required"
                   ng-model="ctrl.selectedValue"
                   ng-focus="ctrl.isFocused = true"
                    />
        </div>
        <ul class="keMultiselect-List">
            <li ng-if="ctrl.selectedValue"
                ng-click="ctrl.addValue(ctrl.selectedValue); ctrl.isFocused = false;">{{ctrl.selectedValue}} - create new</li>
            <li ng-repeat="row in ctrl.options | filter: ctrl.filterOptions"
                ng-click="ctrl.addValue(ctrl.optionValue ? row[ctrl.optionValue] : row); ctrl.isFocused = false;"
                ng-bind-html="ctrl.optionName ? row[ctrl.optionName] : row | sanitize"></li>
        </ul>
    </div>
</div>